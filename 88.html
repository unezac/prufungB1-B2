<html lang="de"><head>
<meta charset="utf-8"/>
<title>Lesen Teil 3</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Font Awesome for Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
    :root {
      --primary-color: #3498db; /* A slightly more vibrant blue */
      --secondary-color: #2ecc71; /* Green for success */
      --danger-color: #e74c3c; /* Red for error */
      --light-bg: #ecf0f1;
      --dark-text: #2c3e50;
      --light-text: #ffffff;
      --border-radius: 10px;
      --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      --box-shadow-hover: 0 8px 20px rgba(0,0,0,0.15);
    }

    body {
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: var(--dark-text);
      animation: fadeInPage 0.8s ease-out;
      min-height: 100vh;
      box-sizing: border-box;
    }

    @keyframes fadeInPage {
      from { opacity: 0; transform: translateY(-15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .header {
      background-color: var(--primary-color);
      color: var(--light-text);
      padding: 20px 25px;
      margin-bottom: 25px;
      border-radius: var(--border-radius);
      text-align: center;
      font-size: 26px;
      font-weight: 600;
      box-shadow: var(--box-shadow);
      letter-spacing: 0.5px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    @media(min-width: 768px) {
      .container {
        flex-direction: row;
      }
    }

    .left-column, .right-column {
      flex: 1;
      min-width: 300px;
    }

    .quiz-scroll-container, .right-column-content {
      background-color: var(--light-text);
      border-radius: var(--border-radius);
      padding: 15px;
      box-shadow: var(--box-shadow);
      max-height: 60vh; /* Adjusted for better viewport fit */
      overflow-y: auto;
      /* Custom scrollbar styling */
      scrollbar-width: thin;
      scrollbar-color: var(--primary-color) var(--light-bg);
    }

    /* Style for .right-column-content when being dragged over */
    .right-column-content.drag-over {
        background-color: #eef8ff; /* Same as .drop-target.drag-over */
        border: 2px dashed var(--primary-color); /* Add a border to indicate it's a drop zone */
    }


    .quiz-scroll-container::-webkit-scrollbar,
    .right-column-content::-webkit-scrollbar {
      width: 8px;
    }
    .quiz-scroll-container::-webkit-scrollbar-track,
    .right-column-content::-webkit-scrollbar-track {
      background: var(--light-bg);
      border-radius: var(--border-radius);
    }
    .quiz-scroll-container::-webkit-scrollbar-thumb,
    .right-column-content::-webkit-scrollbar-thumb {
      background-color: var(--primary-color);
      border-radius: var(--border-radius);
      border: 2px solid var(--light-bg);
    }


    .question-box {
      border: 1px solid #bdc3c7;
      border-left: 5px solid var(--primary-color);
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      padding: 15px;
      background-color: #fdfdfd; /* Slightly off-white */
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .question-box:hover {
      transform: translateY(-3px);
      box-shadow: var(--box-shadow-hover);
    }
    .question-text {
      font-size: 0.9em;
      color: #7f8c8d;
      margin-top: 10px;
    }

    .drop-target {
      background-color: #f9f9f9;
      padding: 12px;
      margin-bottom: 10px; /* Space between drop target and question text */
      border: 2px dashed #cccccc;
      min-height: 45px;
      border-radius: 8px;
      text-align: center;
      transition: background-color 0.3s, border-color 0.3s;
      display: flex; /* To center placeholder and dropped item */
      align-items: center;
      justify-content: center;
      position: relative; /* For feedback icons */
    }
    .drop-target.empty-drop-target::before {
      content: "Hier Antwort ablegen";
      color: #aaa;
      font-style: italic;
      font-size: 0.9em;
    }
    .drop-target:not(.empty-drop-target)::before {
      content: ""; /* Clear placeholder when not empty */
    }

    .drop-target:hover, .drop-target.drag-over {
      background-color: #eef8ff;
      border-color: var(--primary-color);
    }

    .draggable {
      background-color: #e0e0e0;
      color: var(--dark-text);
      margin: 10px 0;
      padding: 12px 15px;
      border-radius: 8px;
      cursor: grab;
      display: flex;
      align-items: center;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
      user-select: none;
      font-size: 0.95em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .draggable:hover {
      background-color: #d0d0d0;
      transform: translateX(3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .draggable.selected {
      outline: 2px solid var(--primary-color);
      box-shadow: 0 0 0 3px var(--primary-color_alpha, rgba(52, 152, 219, 0.3));
      background-color: #cce7ff;
    }
    .draggable.dragging {
      opacity: 0.6;
      transform: scale(0.95);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      cursor: grabbing;
    }

    /* Feedback styling for drop targets */
    .drop-target.correct {
      background-color: #e8f5e9; /* Light green */
      border: 2px solid var(--secondary-color) !important;
    }
    .drop-target.correct::after {
      content: "\f00c"; /* Font Awesome check icon */
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      color: var(--secondary-color);
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2em;
    }

    .drop-target.incorrect {
      background-color: #ffebee; /* Light red */
      border: 2px solid var(--danger-color) !important;
    }
    .drop-target.incorrect::after {
      content: "\f00d"; /* Font Awesome times icon */
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      color: var(--danger-color);
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2em;
    }
    /* Ensure dropped draggable text is visible over feedback */
    .drop-target .draggable {
      background-color: var(--primary-color);
      color: var(--light-text);
      width: calc(100% - 30px); /* Adjust width to make space for icon */
      padding-right: 35px; /* Space for the potential icon */
      box-sizing: border-box;
    }
    .drop-target.correct .draggable { background-color: var(--secondary-color); }
    .drop-target.incorrect .draggable { background-color: var(--danger-color); }


    .wrong-flag {
      margin-right: 10px;
      accent-color: var(--danger-color);
      transform: scale(1.2);
      cursor: pointer;
    }

    .button-container {
      margin-top: 25px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .quiz-button {
      padding: 12px 25px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      font-size: 16px;
      font-weight: 500;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: var(--box-shadow);
    }
    .quiz-button:hover {
      background-color: #2980b9; /* Darker shade of primary */
      transform: translateY(-2px);
      box-shadow: var(--box-shadow-hover);
    }
    .quiz-button:active {
      transform: translateY(0px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .quiz-button.secondary {
      background-color: #7f8c8d; /* A neutral secondary color */
    }
    .quiz-button.secondary:hover {
      background-color: #6c7a89;
    }

    #result {
      text-align: center;
      margin-top: 25px;
      padding: 15px;
      font-size: 1.1em;
      font-weight: 500;
      background-color: var(--light-text);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
    }
    #result .correct-count { color: var(--secondary-color); }
    #result .total-count { color: var(--primary-color); }
    #result .marked-wrong-count { color: var(--danger-color); }

    #warningBox {
  display: none;
  position: fixed;
  top: 20px;                  
  left: 50%;                  
  transform: translateX(-50%);
  background: #f81d1d;
  color: #ffffff;
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  font-family: Arial, sans-serif;
  font-size: 14px;
  font-weight: bold;
  z-index: 9999;
}

  </style>
</head>
<body>
<div class="header">Lesen Teil 3: Musik </div>
<div class="container">
<div class="left-column">
<div class="quiz-scroll-container">
<!-- Questions A-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Sport, Theater &amp; mehr</h4>
            ......bieten wir ihnen in unserem Online-Kartenshop. Wir sind spezialisiert auf Tickets f√ºr Sportveranstaltungen in Deutschland, Theaterkarten (auch im europ√§ischen Ausland) und bieten Ihnen dar√ºber hinaus auch Eintrittskarten zu bekannten Fernseh-Talkshows an. Sicher haben wir auch f√ºr Sie das passende Angebot. Wahlen Sie Ihre Wunschpl√§tze einfach im Internet aus und nur zwei Tage sp√§ter erhalten Sie Ihre Karten mit der Post. Bequem, sicher, schnell. Selbstverst√§ndlich bieten wir Ihnen aber auch eine pers√∂nliche Beratung unter einer kostenfreien Rufnummer an. Schauen Sie doch gleich online vorbei!
            <p>www.ticketprofis.eu</p>
</div>
</div>
<!-- Questions B-->
<div class="question-box" data-correct="Ein Bekannter hat bei der Messe Frankfurt gearbeitet und sucht eine andere Stelle in diesem Bereich.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Die Veranstaltungsprofis</h4>
            Seit mehr als zwanzig Jahren organisieren wir Messen (Buchmessen, Verbrauchermessen, Fahrradmessen, Automessen, Spielemessen) in ganz Europa. Wenn auch Sie sich f√ºr eine T√§tigkeit im Bereich Messeorganisation und -durchf√ºhrung interessieren, haben wir ein interessantes Angebot f√ºr Sie: Ab Herbst suchen wir f√ºr unser Junges motiviertes Team Verst√§rkung. Wenn Sie eine abgeschlossene Ausbildung im Veranstaltungs- oder Logistiksektor haben, neben Ihrer Muttersprache noch mindestens eine weitere Sprache flie√üend beherrschen und reisefreudig sind, melden Sie sich bei uns! Weitere Informationen finden Sie auch auf unserer Website oder sprechen Sie unsere zust√§ndige Mitarbeiterin, Frau Klimke, direkt an.
            <p>www.die-veranstaltungsprofis.eu</p>
<p>klimke@die-veranstaltungsprofis.eu</p>
</div>
</div>
<!-- Questions C-->
<div class="question-box" data-correct="Ein Kollege m√∂chte mit f√ºnf Freunden eine mehrt√§gige Musikveranstaltung besuchen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Gemeinsam mehr erleben</h4>
            Gruppenreisen bieten wir Ihnen bereits ab f√ºnf Personen an - St√§dtereisen, Wellnesswochenenden und neu im Angebot auch Reisen zu kulturellen Veranstaltungen. Fahren Sie mit uns zum Beispiel Ende August zum Jazzfestival in Brandenburg (25.-29.8.) oder im darauffolgenden Monat zur Klassikwoche nach Wien. Von Anreise und Hotel (verschiedene Kategorien) bis hin zur Eintrittskarte organisieren wir f√ºr Sie alles. Genie√üen Sie entspannte Tage mit Werner Reisen GmbH.
            <p>Weitere Informationen und auch Buchungsformulare finden Sie unter www.wernerreisen.eu. Oder rufen Sie uns an: 0800/9900100</p>
</div>
</div>
<!-- Questions D-->
<div class="question-box" data-correct="Sie m√∂gen Musik und m√∂chten in dem Bereich einen Job.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Musikfestival Taubertal: 24. Juli bis 3. August</h4>
            Auch in diesem Jahr kommen wieder viele bekannte Bands und interessante neue K√ºnstler. Das Festival ist schon l√§ngst ausverkauft, aber ihr k√∂nnt trotzdem noch hinkommen: Wir suchen noch Unterst√ºtzung f√ºr den Aufbau der St√§nde, die Betreuung der Musiker und auch f√ºr die Ticketkontrolle. Bewerbt euch einfach per E-Mail. Wichtig: Wenn ihr beim Festival arbeitet, k√∂nnt ihr zwar auch Musik h√∂ren, aber ihr habt keine Gelegenheit, euch die Auftritte in Ruhe anzusehen. Trotzdem macht die Arbeit viel Spa√ü, und ihr k√∂nnt die Musiker sogar hinter der B√ºhne sehen und kennenlernen.
            <p>E-Mail: info@musikfestivaltaubertal.eu</p>
</div>
</div>
<!-- Questions E-->
<div class="question-box" data-correct="Sie m√∂chten einer Freundin Eintrittskarten f√ºr eine Musikveranstaltung schenken.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Alle Veranstaltungen aus einer Hand</h4>
            Ob Jazz, Rock, Klassik, Musical: Bei uns finden Sie Veranstaltungen aus allen Musikbereichen! Reservieren Sie noch heute Karten f√ºr Ihre Lieblingsband, w√§hlen Sie Ihren Platz online und drucken Sie Ihre Tickets sofort selbst aus. Oder kaufen Sie Geschenkgutscheine, die man ebenfalls bequem online einl√∂sen kann: die ideale M√∂glichkeit f√ºr alle, die noch keine bestimmte Veranstaltung ausgesucht haben. Besuchen Sie gleich unseren Online-Shop. Bestellungen sind bei uns √ºbrigens auch ohne Registrierung m√∂glich!
            <p>www.die-veranstaltungsspezialisten.eu</p>
</div>
</div>
<!-- Questions F-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Mail√§nder Scala, Deutsche Oper Berlin und vieles mehr</h4>
            Der etwas andere Zugang zur Musik: Wir organisieren Besichtigungen von bekannten Opernh√§usern oder Konzerts√§len. Schauen Sie sich die Technik und R√§ume vor Ort an, nehmen Sie an einer interessanten F√ºhrung teil und lernen Sie so die Geschichte der H√§user und auch der Orchester kennen. Gerne organisieren wir nach M√∂glichkeit auch Treffen mit Musikern oder Konzertdirektoren, mit denen Sie spannende Gespr√§che f√ºhren und mehr √ºber deren Arbeit erfahren k√∂nnen. Bitte haben Sie Verst√§ndnis, dass wir diese Treffen erst ab zehn Teilnehmern organisieren k√∂nnen. Weitere Informationen:
            <p>Musikreisen Gerhardt, Tel 0800/223 997 880</p>
</div>
</div>
<!-- Questions G-->
<div class="question-box" data-correct="Ein Bekannter muss eine Jubil√§umsfeier organisieren und sucht Unterst√ºtzung.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Feste feiern?</h4>
            Wir organisieren Veranstaltungen in verschiedenen Gr√∂√üenordnungen - von der kleinen Familienfeier mit zehn Personen bis hin zu gro√üen Firmenveranstaltungen mit mehreren Hundert Teilnehmern. Lehnen Sie sich zur√ºck und wir machen die Arbeit! Alternativ bieten wir Ihnen aber auch unsere kompetente Beratung an, damit Sie Ihre Veranstaltung selbst planen k√∂nnen. Unsere Mitarbeiter kommen dann gerne zu Ihnen oder stehen Ihnen telefonisch und per E-Mail zur Verf√ºgung. Sprechen Sie uns an!
            <p>TMC GmbH, info@tmcgmbh.eu</p>
</div>
</div>
<!-- Questions H-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>K√ºnstleragentur Lippmann</h4> 
            Bei der K√ºnstleragentur Lippmann sind √ºber 100 K√ºnstler registriert, die Sie f√ºr Veranstaltungen buchen k√∂nnen. Sie suchen einen Komiker? Kein Problem! Sie m√∂chten auf Ihrer Veranstaltung Schauspieler auftreten lassen? Wir k√∂nnen sie vermitteln! Sie brauchen musikalische Untermalung? Bei uns sind einzelne Musiker ebenso registriert wie Bands. Melden Sie sich noch heute kostenlos und unverbindlich an und schauen Sie in Ruhe alle Angebote durch - einschlie√ülich der Preise und freien Termine. Sicher finden Sie bei uns, was Sie suchen.
            <p>www.agentur-lippmann.eu</p>
</div>
</div>
<!-- Questions I-->
<div class="question-box" data-correct="Die sechsj√§hrige Tochter eines Nachbarn w√ºrde gerne mit andere Kindern Musik machen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Gitarre, Violine &amp; Co.</h4>
            Im Musikverein Wohlklang lernen schon die ganz Kleinen den spielerischen Umgang mit Instrumenten. Aber auch f√ºr die ‚Äûgr√∂√üeren Kleinen" bieten wir Musikf√∂rderung und auch individuellen Unterricht an. In verschiedenen Gruppen (Alter von zwei bis acht Jahren) k√∂nnen Ihre Kinder bei uns Instrumente lernen, singen oder tanzen, kurz: Spa√ü mit Musik haben und auch selbst das Musizieren lernen. Die ersten beiden Probestunden bieten wir Ihnen kostenlos an, damit Sie und Ihre Kinder uns in Ruhe kennenlernen k√∂nnen. Vereinbaren Sie doch gleich einen Termin unter der 0800/5615 6514.Wohlklang e.V., Neue Stra√üe 218, 77933 Lahr
          </div>
</div>
<!-- Questions J-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Instrumente, Noten, Musikb√ºcher</h4>
            Das Musikhaus Hohenzollern hat jetzt wieder besondere Angebote f√ºr alle Interessierten. Wir haben die Preise von allen Instrumenten bis kommenden Samstag reduziert. Auch zahlreiche B√ºcher und Notenhefte finden Sie ab sofort in unserem neuen Online-Shop zu g√ºnstigen Preisen. Unser Einstiegsangebot: alle Bestellungen im Online-Shop ohne Versandkosten! Schauen Sie sich doch mal im Internet um oder kommen Sie direkt bei uns vorbei. Wir freuen uns auf ihren Besuch!
            <p>Musikhaus Hohenzollern, Steeler Str. 789, 45276 Essen www.musikhaus-hohenzollern.eu</p>
</div>
</div>
<!-- Questions K-->
<div class="question-box" data-correct="Eine Bekannte ist Musikerin und sucht M√∂glichkeiten, mit ihrer Gruppe aufzutreten.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Rhein/Ruhr-Festival</h4>
            Im kommenden Herbst findet zum ersten Mal das neue Rhein/Ruhr-Festival statt - und wir ben√∂tigen noch Hilfe. Im Rahmen des Festivals werden auf f√ºnf unterschiedlichen B√ºhnen K√ºnstler auftreten. Wir m√∂chten verschiedene Stilrichtungen pr√§sentieren, Solok√ºnstler ebenso wie gr√∂√üere Musikgruppen. Und noch sind Pl√§tze frei! Die Chance also f√ºr alle, die sich gerne bei unserem Festival pr√§sentieren m√∂chten. Kurzbewerbungen k√∂nnen ab sofort per E-Mail an office@rheinruhrfestival.eu gesendet werden.
            <p>Bitte schicken Sie keine gr√∂√üeren Dateianh√§nge! Vielen Dank.</p>
</div>
</div>
<!-- Questions L-->
<div class="question-box" data-correct="Ein Bekannter spielt Gitarre und m√∂chte ein weiteres Instrument lernen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Musiker gesucht</h4>
            Seit einem Jahr vermitteln wir ‚ÄûMusiktandems‚Äú - Musiker suchen Musiker und geben sich gegenseitig Unterricht. Ob Instrument, Gesang, Komposition - alles wird gesucht! Registrieren Sie sich kostenlos auf unserer Homepage www.musiktandems.eu und finden Sie heute noch das Angebot, das Sie schon lange suchen. Wichtig: Sie k√∂nnen sich nur f√ºr das Musiktandem anmelden, wenn Sie selbst auch Unterricht anbieten k√∂nnen, also zum Beispiel ein Instrument spielen. Auf unserer Website finden Sie auch weitere Informationen zum Ablauf und k√∂nnen den Service kontaktieren.
          </div>
</div>
</div>
</div>
<div class="right-column">
<!-- MODIFIED: Added ondragover and ondrop to make this a droppable area -->
<div class="right-column-content" onclick="clearSelected()" ondragover="allowDrop(event)" ondrop="dropOnAnswersContainer(event)">
<!-- Answers -->
<div class="draggable" draggable="true" id="a1" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ein Bekannter spielt Gitarre und m√∂chte ein weiteres Instrument lernen.
      </div>
<div class="draggable" draggable="true" id="a2" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ein Kollege m√∂chte mit f√ºnf Freunden eine mehrt√§gige Musikveranstaltung besuchen.
      </div>
<div class="draggable" draggable="true" id="a3" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ein Bekannter hat bei der Messe Frankfurt gearbeitet und sucht eine andere Stelle in diesem Bereich.
      </div>
<div class="draggable" draggable="true" id="a4" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie m√∂chten einer Freundin Eintrittskarten f√ºr eine Musikveranstaltung schenken. 
      </div>
<div class="draggable" draggable="true" id="a5" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie interessieren sich f√ºr B√ºcher und m√∂chten eine Messe besuchen.
      </div>
<div class="draggable" draggable="true" id="a6" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Die sechsj√§hrige Tochter eines Nachbarn w√ºrde gerne mit andere Kindern Musik machen. 
      </div>
<div class="draggable" draggable="true" id="a7" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ein Bekannter muss eine Jubil√§umsfeier organisieren und sucht Unterst√ºtzung. 
      </div>
<div class="draggable" draggable="true" id="a8" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie m√∂gen Musik und m√∂chten in dem Bereich einen Job.
      </div>
<div class="draggable" draggable="true" id="a9" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ihre Nachbarin m√∂chte ihre Violine verkaufen. 
      </div>
<div class="draggable" draggable="true" id="a10" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Eine Bekannte ist Musikerin und sucht M√∂glichkeiten, mit ihrer Gruppe aufzutreten.
      </div>
</div>
</div>
</div>
<div class="button-container">
<button class="quiz-button" id="submitQuizButton">
<i class="fas fa-paper-plane"></i> Abschicken
    </button>
<button class="quiz-button secondary" id="resetQuizButton">
<i class="fas fa-redo"></i> Zur√ºcksetzen
    </button>
<!-- Changed to <a> tag for navigation, href to a generic "index.html" or "#" -->
<a class="quiz-button secondary" href="/index2" id="homeButton" role="button">
<i class="fas fa-home"></i> Startseite
    </a>
</div>
<div id="result"></div>
<script>
  let selectedAnswer = null;
  const rightColumnContent = document.querySelector(".right-column-content");
  const originalAnswerOrder = Array.from(rightColumnContent.querySelectorAll('.draggable')); // Store initial order for reset

  // MODIFIED: allowDrop to correctly identify parent droppable container
  function allowDrop(ev) {
    ev.preventDefault();
    let droppableContainer = ev.target;
    // Traverse up to find the actual droppable container (.drop-target or .right-column-content)
    while (droppableContainer && droppableContainer !== document.body &&
           !droppableContainer.classList.contains("drop-target") &&
           !droppableContainer.classList.contains("right-column-content")) {
        droppableContainer = droppableContainer.parentElement;
    }

    if (droppableContainer && (droppableContainer.classList.contains("drop-target") || droppableContainer.classList.contains("right-column-content"))) {
        droppableContainer.classList.add("drag-over");
    }
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    ev.target.classList.add("dragging");
  }

  document.addEventListener('dragleave', function(event) {
    if (event.target.classList && (event.target.classList.contains("drop-target") || event.target.classList.contains("right-column-content"))) {
        if (!event.target.contains(event.relatedTarget) && event.target !== event.relatedTarget) {
             event.target.classList.remove("drag-over");
        } else if (event.relatedTarget === null) { 
            event.target.classList.remove("drag-over");
        }
    }
  }, false);
  
  document.addEventListener('dragend', function(event) {
    if (event.target.classList && event.target.classList.contains('draggable')) {
      event.target.classList.remove('dragging');
    }
    document.querySelectorAll('.drop-target.drag-over, .right-column-content.drag-over').forEach(el => {
        el.classList.remove('drag-over');
    });
  });

  // MODIFIED: drop function for question slots
  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    let dropTarget = ev.target;

    while (dropTarget && !dropTarget.classList.contains("drop-target")) {
        dropTarget = dropTarget.parentElement;
    }
    
    if (!dropTarget || !draggedEl) return;

    dropTarget.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    const currentAnswerInTarget = dropTarget.querySelector(".draggable");
    if (currentAnswerInTarget && currentAnswerInTarget !== draggedEl) {
      rightColumnContent.appendChild(currentAnswerInTarget);
      showCheckbox(currentAnswerInTarget);
    }
    
    dropTarget.innerHTML = ""; 
    dropTarget.appendChild(draggedEl);
    hideCheckbox(draggedEl);
    updateDropTargetState(dropTarget);

    if (originalParentOfDraggedEl &&
        originalParentOfDraggedEl.classList.contains("drop-target") &&
        originalParentOfDraggedEl !== dropTarget) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }

  // NEW: Function to handle drops onto the answers container
  function dropOnAnswersContainer(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    const answersContainer = ev.currentTarget; 

    if (!draggedEl || !answersContainer) return;

    answersContainer.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    answersContainer.appendChild(draggedEl);
    showCheckbox(draggedEl);

    if (originalParentOfDraggedEl && originalParentOfDraggedEl.classList.contains("drop-target")) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }


  function hideCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "none";
  }

  function showCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "inline-block";
  }

  function selectAnswer(el, event) {
    event.stopPropagation(); 
    if (selectedAnswer === el) { 
      el.classList.remove("selected");
      selectedAnswer = null;
    } else {
      if (selectedAnswer) selectedAnswer.classList.remove("selected");
      selectedAnswer = el;
      el.classList.add("selected");
    }
  }

  // MODIFIED: clickDrop function
  function clickDrop(targetDropzone) {
    if (selectedAnswer) {
      const originalParentOfSelectedAnswer = selectedAnswer.parentElement;

      const currentAnswerInDropzone = targetDropzone.querySelector(".draggable");
      if (currentAnswerInDropzone && currentAnswerInDropzone !== selectedAnswer) {
        rightColumnContent.appendChild(currentAnswerInDropzone);
        showCheckbox(currentAnswerInDropzone);
      }
      
      targetDropzone.innerHTML = ""; 
      targetDropzone.appendChild(selectedAnswer);
      hideCheckbox(selectedAnswer);
      updateDropTargetState(targetDropzone);

      if (originalParentOfSelectedAnswer &&
          originalParentOfSelectedAnswer.classList.contains("drop-target") &&
          originalParentOfSelectedAnswer !== targetDropzone) {
          updateDropTargetState(originalParentOfSelectedAnswer);
      }

      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function clearSelected() {
    if (selectedAnswer) {
      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function updateDropTargetState(dropTarget) {
    if (!dropTarget || !dropTarget.classList.contains('drop-target')) return;
    
    if (dropTarget.querySelector(".draggable")) {
      dropTarget.classList.remove("empty-drop-target");
    } else {
      dropTarget.classList.add("empty-drop-target");
    }
  }

  function getDraggableText(draggableElement) {
    const clone = draggableElement.cloneNode(true);
    const checkbox = clone.querySelector('.wrong-flag');
    if (checkbox) {
        checkbox.remove();
    }
    return clone.textContent.trim();
  }

  function submitQuiz() {
    let total = 0, correct = 0;
    document.querySelectorAll('.question-box').forEach((box) => {
      total++;
      const correctAnswerText = box.getAttribute("data-correct").trim();
      const dropTarget = box.querySelector(".drop-target");
      const droppedDraggable = dropTarget.querySelector(".draggable");
      
      dropTarget.classList.remove("correct", "incorrect"); 

      if (droppedDraggable) { 
        const selectedText = getDraggableText(droppedDraggable); 
        if (correctAnswerText === "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        } else {
          if (selectedText === correctAnswerText) {
            dropTarget.classList.add("correct");
            correct++;
          } else {
            dropTarget.classList.add("incorrect");
          }
        }
      } else { 
        if (correctAnswerText !== "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        }
      }
      updateDropTargetState(dropTarget); 
    });

    let wrongMarkedCorrect = 0, wrongMarkedTotal = 0;
    rightColumnContent.querySelectorAll('.draggable').forEach((answerEl) => {
      const text = getDraggableText(answerEl); 
      const checkbox = answerEl.querySelector('.wrong-flag');
      
      const isACorrectAnswerOptionForAnyQuestion = Array.from(document.querySelectorAll('.question-box'))
        .some(box => {
            const qCorrectText = box.getAttribute('data-correct').trim();
            return qCorrectText !== "__NO_CORRECT_ANSWER__" && qCorrectText === text;
        });
      
      if (!isACorrectAnswerOptionForAnyQuestion) { 
        wrongMarkedTotal++; 
        if (checkbox.checked) {
          wrongMarkedCorrect++; 
        }
      }
    });

    const questionsWithNoAnswer = Array.from(document.querySelectorAll('.question-box'))
                                      .filter(box => box.getAttribute('data-correct').trim() === "__NO_CORRECT_ANSWER__").length;
    const scorableTotal = total - questionsWithNoAnswer;


    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML =
      `<span class="correct-count">‚úÖ ${correct}</span> von <span class="total-count">${scorableTotal}</span> bewertbaren Fragen richtig. | ` + 
      `<span class="marked-wrong-count">üö´ Falsch-Antworten korrekt markiert: ${wrongMarkedCorrect}</span> von ${wrongMarkedTotal}.`;
  }

  function resetQuiz() {
    document.querySelectorAll('.drop-target').forEach(dt => {
        const draggable = dt.querySelector('.draggable');
        if (draggable) {
            rightColumnContent.appendChild(draggable); 
            showCheckbox(draggable); 
        }
        dt.innerHTML = ''; 
        dt.classList.remove('correct', 'incorrect'); 
        updateDropTargetState(dt); 
    });

    rightColumnContent.innerHTML = ''; 
    originalAnswerOrder.forEach(draggable => {
        rightColumnContent.appendChild(draggable); 
        draggable.classList.remove('selected', 'dragging'); 
        showCheckbox(draggable); 
        const checkbox = draggable.querySelector('.wrong-flag');
        if (checkbox) checkbox.checked = false; 
    });
    
    if (selectedAnswer) {
      selectedAnswer.classList.remove('selected');
      selectedAnswer = null;
    }

    document.getElementById("result").innerHTML = ""; 
  }

  document.getElementById('submitQuizButton').addEventListener('click', submitQuiz);
  document.getElementById('resetQuizButton').addEventListener('click', resetQuiz);

  document.querySelectorAll('.drop-target').forEach(updateDropTargetState);
</script>
<script>
let pingTimeout;
let logoutTimer;
let warningTimer;
let countdownTimer;
let lastPing = 0;

const INACTIVITY_LIMIT = 15 * 60 * 1000; // 15 minutes
const WARNING_BEFORE_LOGOUT = 30 * 1000; // 30 seconds
const warningBox = document.getElementById("warningBox");
const countdownEl = document.getElementById("countdown");

function sendPing() {
    const now = Date.now();
    if (now - lastPing < 10000) return; 
    lastPing = now;
    fetch("/ping").catch(() => {});
}

function resetTimers() {
    clearTimeout(pingTimeout);
    clearTimeout(logoutTimer);
    clearTimeout(warningTimer);
    clearInterval(countdownTimer);

    warningBox.style.display = "none"; // üü° hide warning if active again

    sendPing();
    pingTimeout = setTimeout(sendPing, 60 * 1000);

    // Show warning 30s before logout
    warningTimer = setTimeout(() => {
        let remaining = 30;
        warningBox.style.display = "block";
        countdownEl.textContent = remaining;

        countdownTimer = setInterval(() => {
            remaining--;
            countdownEl.textContent = remaining;
            if (remaining <= 0) {
                clearInterval(countdownTimer);
            }
        }, 1000);
    }, INACTIVITY_LIMIT - WARNING_BEFORE_LOGOUT);

    // Auto logout
    logoutTimer = setTimeout(() => {
        fetch("/logout", { method: "POST" })
          .then(() => window.location.href = "/");
    }, INACTIVITY_LIMIT);
}

// Events
["mousemove", "keydown", "scroll", "click", "touchstart"].forEach(evt => {
    document.addEventListener(evt, resetTimers);
});

window.addEventListener("pageshow", sendPing);
window.addEventListener("beforeunload", sendPing);

resetTimers();
</script>
</body></html>