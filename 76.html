<html lang="de"><head>
<meta charset="utf-8"/>
<title>Lesen Teil 3</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Font Awesome for Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
    :root {
      --primary-color: #3498db; /* A slightly more vibrant blue */
      --secondary-color: #2ecc71; /* Green for success */
      --danger-color: #e74c3c; /* Red for error */
      --light-bg: #ecf0f1;
      --dark-text: #2c3e50;
      --light-text: #ffffff;
      --border-radius: 10px;
      --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      --box-shadow-hover: 0 8px 20px rgba(0,0,0,0.15);
    }

    body {
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: var(--dark-text);
      animation: fadeInPage 0.8s ease-out;
      min-height: 100vh;
      box-sizing: border-box;
    }

    @keyframes fadeInPage {
      from { opacity: 0; transform: translateY(-15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .header {
      background-color: var(--primary-color);
      color: var(--light-text);
      padding: 20px 25px;
      margin-bottom: 25px;
      border-radius: var(--border-radius);
      text-align: center;
      font-size: 26px;
      font-weight: 600;
      box-shadow: var(--box-shadow);
      letter-spacing: 0.5px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    @media(min-width: 768px) {
      .container {
        flex-direction: row;
      }
    }

    .left-column, .right-column {
      flex: 1;
      min-width: 300px;
    }

    .quiz-scroll-container, .right-column-content {
      background-color: var(--light-text);
      border-radius: var(--border-radius);
      padding: 15px;
      box-shadow: var(--box-shadow);
      max-height: 60vh; /* Adjusted for better viewport fit */
      overflow-y: auto;
      /* Custom scrollbar styling */
      scrollbar-width: thin;
      scrollbar-color: var(--primary-color) var(--light-bg);
    }

    /* Style for .right-column-content when being dragged over */
    .right-column-content.drag-over {
        background-color: #eef8ff; /* Same as .drop-target.drag-over */
        border: 2px dashed var(--primary-color); /* Add a border to indicate it's a drop zone */
    }


    .quiz-scroll-container::-webkit-scrollbar,
    .right-column-content::-webkit-scrollbar {
      width: 8px;
    }
    .quiz-scroll-container::-webkit-scrollbar-track,
    .right-column-content::-webkit-scrollbar-track {
      background: var(--light-bg);
      border-radius: var(--border-radius);
    }
    .quiz-scroll-container::-webkit-scrollbar-thumb,
    .right-column-content::-webkit-scrollbar-thumb {
      background-color: var(--primary-color);
      border-radius: var(--border-radius);
      border: 2px solid var(--light-bg);
    }


    .question-box {
      border: 1px solid #bdc3c7;
      border-left: 5px solid var(--primary-color);
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      padding: 15px;
      background-color: #fdfdfd; /* Slightly off-white */
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .question-box:hover {
      transform: translateY(-3px);
      box-shadow: var(--box-shadow-hover);
    }
    .question-text {
      font-size: 0.9em;
      color: #7f8c8d;
      margin-top: 10px;
    }

    .drop-target {
      background-color: #f9f9f9;
      padding: 12px;
      margin-bottom: 10px; /* Space between drop target and question text */
      border: 2px dashed #cccccc;
      min-height: 45px;
      border-radius: 8px;
      text-align: center;
      transition: background-color 0.3s, border-color 0.3s;
      display: flex; /* To center placeholder and dropped item */
      align-items: center;
      justify-content: center;
      position: relative; /* For feedback icons */
    }
    .drop-target.empty-drop-target::before {
      content: "Hier Antwort ablegen";
      color: #aaa;
      font-style: italic;
      font-size: 0.9em;
    }
    .drop-target:not(.empty-drop-target)::before {
      content: ""; /* Clear placeholder when not empty */
    }

    .drop-target:hover, .drop-target.drag-over {
      background-color: #eef8ff;
      border-color: var(--primary-color);
    }

    .draggable {
      background-color: #e0e0e0;
      color: var(--dark-text);
      margin: 10px 0;
      padding: 12px 15px;
      border-radius: 8px;
      cursor: grab;
      display: flex;
      align-items: center;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
      user-select: none;
      font-size: 0.95em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .draggable:hover {
      background-color: #d0d0d0;
      transform: translateX(3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .draggable.selected {
      outline: 2px solid var(--primary-color);
      box-shadow: 0 0 0 3px var(--primary-color_alpha, rgba(52, 152, 219, 0.3));
      background-color: #cce7ff;
    }
    .draggable.dragging {
      opacity: 0.6;
      transform: scale(0.95);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      cursor: grabbing;
    }

    /* Feedback styling for drop targets */
    .drop-target.correct {
      background-color: #e8f5e9; /* Light green */
      border: 2px solid var(--secondary-color) !important;
    }
    .drop-target.correct::after {
      content: "\f00c"; /* Font Awesome check icon */
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      color: var(--secondary-color);
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2em;
    }

    .drop-target.incorrect {
      background-color: #ffebee; /* Light red */
      border: 2px solid var(--danger-color) !important;
    }
    .drop-target.incorrect::after {
      content: "\f00d"; /* Font Awesome times icon */
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      color: var(--danger-color);
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2em;
    }
    /* Ensure dropped draggable text is visible over feedback */
    .drop-target .draggable {
      background-color: var(--primary-color);
      color: var(--light-text);
      width: calc(100% - 30px); /* Adjust width to make space for icon */
      padding-right: 35px; /* Space for the potential icon */
      box-sizing: border-box;
    }
    .drop-target.correct .draggable { background-color: var(--secondary-color); }
    .drop-target.incorrect .draggable { background-color: var(--danger-color); }


    .wrong-flag {
      margin-right: 10px;
      accent-color: var(--danger-color);
      transform: scale(1.2);
      cursor: pointer;
    }

    .button-container {
      margin-top: 25px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .quiz-button {
      padding: 12px 25px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      font-size: 16px;
      font-weight: 500;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: var(--box-shadow);
    }
    .quiz-button:hover {
      background-color: #2980b9; /* Darker shade of primary */
      transform: translateY(-2px);
      box-shadow: var(--box-shadow-hover);
    }
    .quiz-button:active {
      transform: translateY(0px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .quiz-button.secondary {
      background-color: #7f8c8d; /* A neutral secondary color */
    }
    .quiz-button.secondary:hover {
      background-color: #6c7a89;
    }

    #result {
      text-align: center;
      margin-top: 25px;
      padding: 15px;
      font-size: 1.1em;
      font-weight: 500;
      background-color: var(--light-text);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
    }
    #result .correct-count { color: var(--secondary-color); }
    #result .total-count { color: var(--primary-color); }
    #result .marked-wrong-count { color: var(--danger-color); }

    #warningBox {
  display: none;
  position: fixed;
  top: 20px;                  
  left: 50%;                  
  transform: translateX(-50%);
  background: #f81d1d;
  color: #ffffff;
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  font-family: Arial, sans-serif;
  font-size: 14px;
  font-weight: bold;
  z-index: 9999;
}

  </style>
</head>
<body>
<div class="header">Lesen Teil 3: Kein Zeit</div>
<div class="container">
<div class="left-column">
<div class="quiz-scroll-container">
<!-- Questions A-->
<div class="question-box" data-correct="Sie m√∂chten mit Ihrer zw√∂lfj√§hrigen Tochter ein altersgerechtes Theaterst√ºck sehen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Theater Marabu</h4>
            In Pollekes elfj√§hrigem Leben scheint im Augenblick etwas falsch zu laufen. Es st√∂rt sie ja gar nicht, dass ihre Eltern geschieden sind. Sie hat ihren Papa sehr lieb, und sie hat eine prima Mama. Ihr Lehrer ist eigentlich auch ganz in Ordnung, aber muss der sich gleich in ihre Mama verlieben? Und dann ist Polleke sogar selbst schuld an allem. Aber sie gibt die Hoffnung nicht auf, dass am Ende doch alles gut wird, auch mit Mimun, dem liebsten Jungen auf der ganzen Erde und im ganzen Weltall‚Ä¶
            Datum: 01.11., Uhrzeit: 16.00 Uhr, Ort: Theaterwerkstatt, Alter: ab 9 Jahren
        </div>
</div>
<!-- Questions B-->
<div class="question-box" data-correct="Sie m√∂chten zusammen mit Ihren kleinen Neffen einen Kinderfilm sehen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Rasmus und der Landstreicher</h4>
            Nach dem Kinderbuch von Astrid Lindgren 
            Rasmus ist in einem Kinderheim aufgewachsen, er hat keine Eltern. Eines Tages l√§uft er davon und will sich Eltern suchen. Die erste Nacht schl√§ft er in einer Scheune im Stroh, und am Morgen entdeckt er neben sich Oskar. Oskar ist ein Landstreicher, der keine Wohnung hat. Zuerst hat Rasmus Angst vor ihm, aber schon bald merkt er, dass Oskar ein pr√§chtiger Mensch ist. Gemeinsam suchen sie Eltern f√ºr Rasmus. Doch als sie endlich prima Eltern gefunden haben, da wollen die beiden sich nicht mehr trennen.
            Datum: 6.11., Uhrzeit: 15.00 Uhr, Ort: B√ºrgerkino, Alter: ab 5 Jahren
        </div>
</div>
<!-- Questions C-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Claus von Wagner: Im Feld</h4>
            Die Verfilmung des Buches ‚ÄùIm Feld‚Äù handelt von einem jungen Mann, der bisher mit den W√∂lfen geheult hat. Er hat stets gemacht, was alle gemacht haben, und sich nach der Mehrheit gerichtet: F√ºhrerschein, Studium, Beruf, Freundin, iPod. In dieser Reihenfolge. Nun soll er pl√∂tzlich Vater werden. Doch der Antiheld ergreift die Flucht, um nachzudenken. Verfolgt von st√§dtischen Beamten, der Polizei, den Reportern eines regionalen H√∂rfunksenders und seinen eigenen √Ñngsten, st√ºrzt er sich in pointenreiche Analysen des Weltzustandes‚Ä¶
            Datum: 30.10. bis 01.11., Uhrzeit: 20.00 Uhr, Ort: Kinopolis
        </div>
</div>
<!-- Questions D-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Geschlossene Gesellschaft: Drama von Jean-Paul-Sartre</h4>
            Drei Personen, ein Mann und zwei Frauen, werden nach ihrem Tod in einem Zimmer eingesperrt, das keiner der drei jemals wieder verlassen und niemand anderes je betreten wird: Der Ort des Geschehens ist die H√∂lle. Alle drei sind sich bewusst, dass sie sich in der H√∂lle befinden, und machen sich auf das Schlimmste gefasst, aber die erwartete Folter und die k√∂rperlichen Qualen stellen sich nicht ein, nur eine leichte Hitze ist zu versp√ºren. Tastend versuchen Sie, voneinander den Grund f√ºr die H√∂llenfahrt zu erfahren, ohne jedoch ihre eigene Schuld zu offenbaren.
            Datum: 01.11., Uhrzeit: 20.00 Uhr, Ort: Euro Theater Central
        </div>
</div>
<!-- Questions E-->
<div class="question-box" data-correct="Ihre Schwester interessiert sich f√ºr die Biographien gro√üer Musiker.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Beethovens Bonn</h4>
            Im Dezember 1770 erblickte Ludwig von Beethoven in der Bonngasse 20 das Licht der Welt. Wer ahnte damals, dass mit ihm ein musikalisches Genie geboren wurde, dessen Musik heute in aller Welt bekannt ist? Bis 1792 lebte Beethoven in Bonn, bevor er nach Wien ging und zu einem der ber√ºhmtesten Komponisten der Welt wurde. Es werden Orte und Pl√§tze aufgesucht, wo der weltber√ºhmte Komponist wirkte und die faszinierenden Einblicke in das Alltagsleben dieses gro√üen Bonners erm√∂glichen.
            Datum: 01.12. bis 31.12., Ort: Touristeninformation
        </div>
</div>
<!-- Questions F-->
<div class="question-box" data-correct="Sie wollen ein Stadtbesichtigung mit ein wenig Sport verbinden.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Radtour am Rhein</h4>
            Hinweis: Diese Tour ist nur von Gruppen auf Anfrage buchbar! Die Fahrr√§der sind mitzubringen. Die Tour wird vom ADFC angeboten und verl√§uft am Rhein, einem der geschichtstr√§chtigsten Fl√ºsse der Welt. Er symbolisiert wie f√ºr viele Rheinanwohner auch f√ºr Bonn √ºber Jahrhunderte hinweg bis auf den heutigen Tag die Lebensader der Stadt. Entlang des linksrheinischen Rheinufers sprechen die steinernen Zeitzeugen der Bonner Geschichte f√ºr sich, wobei auch die zukunftsweisenden Aspekte der Stadt nicht zu kurz kommen.
            Datum: 01.02. bis 31.12, Ort und Uhrzeit: nach Vereinbarung          
        </div>
</div>
<!-- Questions G-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Weihnachtsmarkt in Koblenz</h4>
            √úber 100 festlich geschm√ºckte Holzh√§uschen, der Duft von Lebkuchen und Gl√ºhwein liegt in der Luft, Weihnachtsmelodien erklingen im malerischen Ambiente der historischen Altstadt unweit der Einkaufsstra√üen: Das ist der Koblenzer Weihnachtsmarkt 2007. Alles, was das Herz in der Weihnachtszeit begehrte, findet sich hier wieder, denn auch in diesem Jahr warten wieder ein umfangreiches Angebot an Kunsthandwerk und Weihnachtsschmuck und eine riesige Auswahl an Geschenkartikeln auf die Besucher. Abgerundet durch Weihnachtsb√§ckerei und viele Attraktionen, wird der Besuch auf dem Koblenzer Weihnachtsmarkt zu einem Erlebnis, das Sie sich nicht entgehen lassen sollen.
            Datum: 23.11. - 23.12., Ort: Fu√üg√§ngerzone im Zentrum
        </div>
</div>
<!-- Questions H-->
<div class="question-box" data-correct="Sie wollen mit ihren Kindern eine etwas andere, eher lustige Seite von Weihnachten erleben.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Drei Fl√∂he und das Jesuskind</h4> 
            Im Jahr 1 machten sich drei Fl√∂he aus Deutschland auf den Weg nach Israel, um einmal so richtig zu entspannen. Leider war zu diesem Zeitpunkt eine Volksz√§hlung im vollen Gange und die einzige √úbernachtungsm√∂glichkeit fanden sie in einem Stall bei Bethlehem. Dass sie diese Unterkunft auch noch mit einem kleinen Kind teilen m√ºssten, damit rechnete keiner der drei Fl√∂he. Und dass dieses Kind auch noch eine Ber√ºhmtheit war, machte die ganze Sache f√ºr die drei Fl√∂he zu einem aufregenden Abenteuer. Dieses neue Kinderst√ºck aus der Feder von Dirk Zimmer erz√§hlt die Weihnachtsgeschichte auf humorvolle und gef√ºhlvolle Weise aus der Sicht der drei Fl√∂hen.
            Datum: 26.11. - 22.12., Uhrzeit: jeweils, 15.00 Uhr, Ort: Innenhof des Rathauses, Alter: ab 5 Jahre.      
        </div>
</div>
<!-- Questions I-->
<div class="question-box" data-correct="Sie m√∂chten an einem Abend alte und neue Weihnachtslieder h√∂ren.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Weihnachtsshow</h4>
            "Stille Nacht" trifft "Last Christmas", Gospel umarmt Soul, und Pop k√ºsst Klassik. Als 1997 die Idee entstand, eine Weihnachtsshow zu entwickeln, die die sch√∂nsten Weihnachtslieder aller Zeiten und aller Genre in sich vereint, konnte sich keiner so recht vorstellen, dass diese Show einmal zur erfolgreichsten Weihnachtsshow Deutschlands avancieren w√ºrde. Seit zehn Jahren begeistert nun die Band "Christmast Moments" von Thomas Schwab &amp; Band das Publikum sowohl in den gro√üen Konzerthallen der Republik (unter anderem Arena Trier, Ph√∂nix Halle Mainz) als auch vor den Fernsehern (ARD- Ausstrahlungen seit 2004). "Christmas Moments" trifft mitten ins Herz und konnte in den letzten Jahren mehr als 500.000 Zuschauer begeistern.
            Datum: 11.12., Uhrzeit: 20.00 Uhr, Ort: Rhein-Mosel-Halle
          </div>
</div>
<!-- Questions J-->
<div class="question-box" data-correct="Sie lieben Auftritte von herausragenden Musik.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Lasse Lindgren Ensemble</h4>
            Jazz vom Feinsten mit durchaus gewollten konservativen Z√ºgen. Der Trompeter Lasse Lindgren ist einer der innovativen Spitzen-Trompeter der aktuellen Jazzszene in Schweden, der in vielen internationalen Bigbands und zusammen mit anderen ber√ºhmten Jazzmusikern gespielt hat. Von der Tageszeitung "Svenska Dagbladet" wurde er als "einer der kompetentesten Trompetenspieler dieses Landes" bezeichnet und Randy Brecker schrieb: "Es ist so erfrischend, etwas zu h√∂ren, was wirklich originell ist! Lass Lindgren, Du bist ein wundervoller Spieler und Komponist". Sein neuestes Projekt ist ein Glaubensbekenntnis an die Kraft und Energie des Jazz mit eigener Handschrift: Lasse Lindgren hat eine virtuose, immer transparente Hingabe zu seinem Instrument.
            Datum: 1.11., Uhrzeit: 19.00 Uhr, Ort: Irish Pub im Stadtzentrum
        </div>
</div>
<!-- Questions K-->
<div class="question-box" data-correct="Sie wollen mit Bekannten ausgehen um mal wieder herzhaft lachen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>10 Jahre F√úR DIE KATZ</h4>
            Unglaublich! 10 Jahre ist es bereits her, seit F√úR DIE KATZ wie ein Faustschlag ins Licht der √ñffentlichkeit traten und sich binnen k√ºrzester Zeit in die Spitzenriege der deutschen Komiker katapultierten. Heute befinden sich die beiden mit Preisen √ºberh√§uften Weltb√ºrger Benno Rex und Karl Salzburger auf dem vorl√§ufigen H√∂hepunkt ihrer eindrucksvollen Karriere und gelten als die vielseitigsten, kreativsten und f√ºr Presse wie Fans schlichtweg lustigsten Kom√∂dianten Deutschlands. Ihre Wortsch√∂pfungen und Charaktere erweisen sich immer wieder als richtungsweisende Leitsterne f√ºr die gesamte Comedy-Branche.
            Datum: 5.11., Uhrzeit: 20.00 Uhr, Ort: Haus des Kabaretts
        </div>
</div>
<!-- Questions L-->
<div class="question-box" data-correct="Sie m√∂chten im Dezember essen gehen und ein buntes, k√ºnstlerisches Programm genie√üen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Weihnachtsvariet√© im Caf√© Spitz</h4>
            Das Weihnachtsvariet√© erwartet Sie auch in diesem Jahr mit atemberaubender Akrobatik, traumhafter Jonglage, erg√§nzt von Livemusikern. Seien Sie dabei und staunen Sie vielleicht mit ihrer Familie, mit ihren Lieblingskollegen oder der ganzen Firma oder einfach nur mit ihrem oder Ihrer Liebsten. Karl-Heinz Helmschrot hat auch in diesem Jahr wieder eine faszinierende Gruppe von sehr unterschiedlichen K√ºnstlern zusammengestellt. Zum 10-j√§hrigen Jubil√§um - 10 K√ºnstler! Nicht zust√§ndig ist er f√ºr Ihr leibliches Wohl! Daf√ºr haben die K√∂che des Caf√© Spitz wieder eine internationale Karte zusammengestellt, also freuen Sie sich auf K√∂stlichkeiten aus aller Welt. 
            Datum: 9.12., Uhrzeit: 21.00 Uhr, Ort: Caf√© Spitz
          </div>
</div>
</div>
</div>
<div class="right-column">
<!-- MODIFIED: Added ondragover and ondrop to make this a droppable area -->
<div class="right-column-content" onclick="clearSelected()" ondragover="allowDrop(event)" ondrop="dropOnAnswersContainer(event)">
<!-- Answers -->
<div class="draggable" draggable="true" id="a1" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ihre Schwester interessiert sich f√ºr die Biographien gro√üer Musiker.
      </div>
<div class="draggable" draggable="true" id="a2" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie lieben Auftritte von herausragenden Musik.
      </div>
<div class="draggable" draggable="true" id="a3" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie m√∂chten im Dezember essen gehen und ein buntes, k√ºnstlerisches Programm genie√üen.
      </div>
<div class="draggable" draggable="true" id="a4" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie m√∂chten an einem Abend alte und neue Weihnachtslieder h√∂ren.
      </div>
<div class="draggable" draggable="true" id="a5" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie m√∂chten mit Ihrer zw√∂lfj√§hrigen Tochter ein altersgerechtes Theaterst√ºck sehen.
      </div>
<div class="draggable" draggable="true" id="a6" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie m√∂chten zusammen mit Ihren kleinen Neffen einen Kinderfilm sehen.
      </div>
<div class="draggable" draggable="true" id="a7" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie wollen ein Stadtbesichtigung mit ein wenig Sport verbinden.
      </div>
<div class="draggable" draggable="true" id="a8" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie wollen ihrem Freund, der Tanztheater liebt, eine Eintrittskarte zum Geburtstag schenken.
      </div>
<div class="draggable" draggable="true" id="a9" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie wollen mit ihren Kindern eine etwas andere, eher lustige Seite von Weihnachten erleben.
      </div>
<div class="draggable" draggable="true" id="a10" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie wollen mit Bekannten ausgehen um mal wieder herzhaft lachen.
      </div>
</div>
</div>
</div>
<div class="button-container">
<button class="quiz-button" id="submitQuizButton">
<i class="fas fa-paper-plane"></i> Abschicken
    </button>
<button class="quiz-button secondary" id="resetQuizButton">
<i class="fas fa-redo"></i> Zur√ºcksetzen
    </button>
<!-- Changed to <a> tag for navigation, href to a generic "index.html" or "#" -->
<a class="quiz-button secondary" href="/index2" id="homeButton" role="button">
<i class="fas fa-home"></i> Startseite
    </a>
</div>
<div id="result"></div>
<script>
  let selectedAnswer = null;
  const rightColumnContent = document.querySelector(".right-column-content");
  const originalAnswerOrder = Array.from(rightColumnContent.querySelectorAll('.draggable')); // Store initial order for reset

  // MODIFIED: allowDrop to correctly identify parent droppable container
  function allowDrop(ev) {
    ev.preventDefault();
    let droppableContainer = ev.target;
    // Traverse up to find the actual droppable container (.drop-target or .right-column-content)
    while (droppableContainer && droppableContainer !== document.body &&
           !droppableContainer.classList.contains("drop-target") &&
           !droppableContainer.classList.contains("right-column-content")) {
        droppableContainer = droppableContainer.parentElement;
    }

    if (droppableContainer && (droppableContainer.classList.contains("drop-target") || droppableContainer.classList.contains("right-column-content"))) {
        droppableContainer.classList.add("drag-over");
    }
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    ev.target.classList.add("dragging");
  }

  document.addEventListener('dragleave', function(event) {
    if (event.target.classList && (event.target.classList.contains("drop-target") || event.target.classList.contains("right-column-content"))) {
        if (!event.target.contains(event.relatedTarget) && event.target !== event.relatedTarget) {
             event.target.classList.remove("drag-over");
        } else if (event.relatedTarget === null) { 
            event.target.classList.remove("drag-over");
        }
    }
  }, false);
  
  document.addEventListener('dragend', function(event) {
    if (event.target.classList && event.target.classList.contains('draggable')) {
      event.target.classList.remove('dragging');
    }
    document.querySelectorAll('.drop-target.drag-over, .right-column-content.drag-over').forEach(el => {
        el.classList.remove('drag-over');
    });
  });

  // MODIFIED: drop function for question slots
  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    let dropTarget = ev.target;

    while (dropTarget && !dropTarget.classList.contains("drop-target")) {
        dropTarget = dropTarget.parentElement;
    }
    
    if (!dropTarget || !draggedEl) return;

    dropTarget.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    const currentAnswerInTarget = dropTarget.querySelector(".draggable");
    if (currentAnswerInTarget && currentAnswerInTarget !== draggedEl) {
      rightColumnContent.appendChild(currentAnswerInTarget);
      showCheckbox(currentAnswerInTarget);
    }
    
    dropTarget.innerHTML = ""; 
    dropTarget.appendChild(draggedEl);
    hideCheckbox(draggedEl);
    updateDropTargetState(dropTarget);

    if (originalParentOfDraggedEl &&
        originalParentOfDraggedEl.classList.contains("drop-target") &&
        originalParentOfDraggedEl !== dropTarget) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }

  // NEW: Function to handle drops onto the answers container
  function dropOnAnswersContainer(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    const answersContainer = ev.currentTarget; 

    if (!draggedEl || !answersContainer) return;

    answersContainer.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    answersContainer.appendChild(draggedEl);
    showCheckbox(draggedEl);

    if (originalParentOfDraggedEl && originalParentOfDraggedEl.classList.contains("drop-target")) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }


  function hideCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "none";
  }

  function showCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "inline-block";
  }

  function selectAnswer(el, event) {
    event.stopPropagation(); 
    if (selectedAnswer === el) { 
      el.classList.remove("selected");
      selectedAnswer = null;
    } else {
      if (selectedAnswer) selectedAnswer.classList.remove("selected");
      selectedAnswer = el;
      el.classList.add("selected");
    }
  }

  // MODIFIED: clickDrop function
  function clickDrop(targetDropzone) {
    if (selectedAnswer) {
      const originalParentOfSelectedAnswer = selectedAnswer.parentElement;

      const currentAnswerInDropzone = targetDropzone.querySelector(".draggable");
      if (currentAnswerInDropzone && currentAnswerInDropzone !== selectedAnswer) {
        rightColumnContent.appendChild(currentAnswerInDropzone);
        showCheckbox(currentAnswerInDropzone);
      }
      
      targetDropzone.innerHTML = ""; 
      targetDropzone.appendChild(selectedAnswer);
      hideCheckbox(selectedAnswer);
      updateDropTargetState(targetDropzone);

      if (originalParentOfSelectedAnswer &&
          originalParentOfSelectedAnswer.classList.contains("drop-target") &&
          originalParentOfSelectedAnswer !== targetDropzone) {
          updateDropTargetState(originalParentOfSelectedAnswer);
      }

      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function clearSelected() {
    if (selectedAnswer) {
      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function updateDropTargetState(dropTarget) {
    if (!dropTarget || !dropTarget.classList.contains('drop-target')) return;
    
    if (dropTarget.querySelector(".draggable")) {
      dropTarget.classList.remove("empty-drop-target");
    } else {
      dropTarget.classList.add("empty-drop-target");
    }
  }

  function getDraggableText(draggableElement) {
    const clone = draggableElement.cloneNode(true);
    const checkbox = clone.querySelector('.wrong-flag');
    if (checkbox) {
        checkbox.remove();
    }
    return clone.textContent.trim();
  }

  function submitQuiz() {
    let total = 0, correct = 0;
    document.querySelectorAll('.question-box').forEach((box) => {
      total++;
      const correctAnswerText = box.getAttribute("data-correct").trim();
      const dropTarget = box.querySelector(".drop-target");
      const droppedDraggable = dropTarget.querySelector(".draggable");
      
      dropTarget.classList.remove("correct", "incorrect"); 

      if (droppedDraggable) { 
        const selectedText = getDraggableText(droppedDraggable); 
        if (correctAnswerText === "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        } else {
          if (selectedText === correctAnswerText) {
            dropTarget.classList.add("correct");
            correct++;
          } else {
            dropTarget.classList.add("incorrect");
          }
        }
      } else { 
        if (correctAnswerText !== "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        }
      }
      updateDropTargetState(dropTarget); 
    });

    let wrongMarkedCorrect = 0, wrongMarkedTotal = 0;
    rightColumnContent.querySelectorAll('.draggable').forEach((answerEl) => {
      const text = getDraggableText(answerEl); 
      const checkbox = answerEl.querySelector('.wrong-flag');
      
      const isACorrectAnswerOptionForAnyQuestion = Array.from(document.querySelectorAll('.question-box'))
        .some(box => {
            const qCorrectText = box.getAttribute('data-correct').trim();
            return qCorrectText !== "__NO_CORRECT_ANSWER__" && qCorrectText === text;
        });
      
      if (!isACorrectAnswerOptionForAnyQuestion) { 
        wrongMarkedTotal++; 
        if (checkbox.checked) {
          wrongMarkedCorrect++; 
        }
      }
    });

    const questionsWithNoAnswer = Array.from(document.querySelectorAll('.question-box'))
                                      .filter(box => box.getAttribute('data-correct').trim() === "__NO_CORRECT_ANSWER__").length;
    const scorableTotal = total - questionsWithNoAnswer;


    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML =
      `<span class="correct-count">‚úÖ ${correct}</span> von <span class="total-count">${scorableTotal}</span> bewertbaren Fragen richtig. | ` + 
      `<span class="marked-wrong-count">üö´ Falsch-Antworten korrekt markiert: ${wrongMarkedCorrect}</span> von ${wrongMarkedTotal}.`;
  }

  function resetQuiz() {
    document.querySelectorAll('.drop-target').forEach(dt => {
        const draggable = dt.querySelector('.draggable');
        if (draggable) {
            rightColumnContent.appendChild(draggable); 
            showCheckbox(draggable); 
        }
        dt.innerHTML = ''; 
        dt.classList.remove('correct', 'incorrect'); 
        updateDropTargetState(dt); 
    });

    rightColumnContent.innerHTML = ''; 
    originalAnswerOrder.forEach(draggable => {
        rightColumnContent.appendChild(draggable); 
        draggable.classList.remove('selected', 'dragging'); 
        showCheckbox(draggable); 
        const checkbox = draggable.querySelector('.wrong-flag');
        if (checkbox) checkbox.checked = false; 
    });
    
    if (selectedAnswer) {
      selectedAnswer.classList.remove('selected');
      selectedAnswer = null;
    }

    document.getElementById("result").innerHTML = ""; 
  }

  document.getElementById('submitQuizButton').addEventListener('click', submitQuiz);
  document.getElementById('resetQuizButton').addEventListener('click', resetQuiz);

  document.querySelectorAll('.drop-target').forEach(updateDropTargetState);
</script>
<script>
let pingTimeout;
let logoutTimer;
let warningTimer;
let countdownTimer;
let lastPing = 0;

const INACTIVITY_LIMIT = 15 * 60 * 1000; // 15 minutes
const WARNING_BEFORE_LOGOUT = 30 * 1000; // 30 seconds
const warningBox = document.getElementById("warningBox");
const countdownEl = document.getElementById("countdown");

function sendPing() {
    const now = Date.now();
    if (now - lastPing < 10000) return; 
    lastPing = now;
    fetch("/ping").catch(() => {});
}

function resetTimers() {
    clearTimeout(pingTimeout);
    clearTimeout(logoutTimer);
    clearTimeout(warningTimer);
    clearInterval(countdownTimer);

    warningBox.style.display = "none"; // üü° hide warning if active again

    sendPing();
    pingTimeout = setTimeout(sendPing, 60 * 1000);

    // Show warning 30s before logout
    warningTimer = setTimeout(() => {
        let remaining = 30;
        warningBox.style.display = "block";
        countdownEl.textContent = remaining;

        countdownTimer = setInterval(() => {
            remaining--;
            countdownEl.textContent = remaining;
            if (remaining <= 0) {
                clearInterval(countdownTimer);
            }
        }, 1000);
    }, INACTIVITY_LIMIT - WARNING_BEFORE_LOGOUT);

    // Auto logout
    logoutTimer = setTimeout(() => {
        fetch("/logout", { method: "POST" })
          .then(() => window.location.href = "/");
    }, INACTIVITY_LIMIT);
}

// Events
["mousemove", "keydown", "scroll", "click", "touchstart"].forEach(evt => {
    document.addEventListener(evt, resetTimers);
});

window.addEventListener("pageshow", sendPing);
window.addEventListener("beforeunload", sendPing);

resetTimers();
</script>
</body></html>